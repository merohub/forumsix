<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
        <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<title>EC Forum</title>
        
        <script src="js/cordova-2.4.0.js"></script>
		<script src="js/jquery/jquery-1.9.1.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/custom.css">
        <link href='http://fonts.googleapis.com/css?family=Rosario' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="js/jquery/jquery.mobile-1.3.1.min.css" />
        <link rel="stylesheet" href="js/jquery/jquery.mobile.structure-1.3.1.min.css" />
        <link rel="stylesheet" href="js/jquery/jquery.mobile.theme-1.3.1.min.css" />
        <link rel="stylesheet" href="js/jquery/themes/Absinthe.min.css" />
        <link rel="stylesheet" href="css/absinthe.css" />
        
        <script src="js/html5sql.js"></script>
        <script src="http://localhost/html5sql/js/data.js"></script>
        <script src="js/app.js"></script>
        
		<script src="js/jquery/jquery.mobile-1.3.1.min.js"></script>

<script type="text/javascript">
function onBodyLoad(){
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady(){
    checkDB();
}

</script>
<!--HOME -->
<script type="text/javascript">
	function home_json(){
   
    var hr = new XMLHttpRequest();
   
    var url = "http://hitlarrajbhandari.info/home.json";
    hr.open("GET", url, true);
    // Set content type header information for sending url encoded variables in the request
    hr.setRequestHeader("Content-type", "application/json", true);
    // Access the onreadystatechange event for the XMLHttpRequest object
    hr.onreadystatechange = function() {
	    if(hr.readyState == 4 && hr.status == 200) {
		    var data = JSON.parse(hr.responseText);
			var resu = document.getElementById("resu");
	   		//results.innerHTML = data.news2.head +" <br/>Full report: " +data.news2.detail;
	    resu.innerHTML = "";
	    for(var obj in data){
	    		resu.innerHTML += "<strong>"+"<ul style='list-style-type:none'><li>"+data[obj].home+"</strong>" +"</li>"+"</ul>";
	    }
	    }
    }
    // Send the data to PHP now... and wait for response to update the status div
    hr.send(null); // Actually execute the request
    document.getElementById("resu").innerHTML = "requesting...";
}
	</script>


<script type='text/javascript'>//<![CDATA[ 
$(function(){
    $(document).on('pagebeforeshow', '#video', function(){      
        $.ajax({url: "http://hitlarrajbhandari.info/videos.json",
            dataType: "json",
            async: true,
            success: function (result) {
                ajax.parseJSON(result);
            },
            error: function (request,error) {
                alert('Network error has occurred please try again!');
            }
        });         
    });
    
    
    var ajax = {  
        parseJSON:function(result){
            $.each( result, function(i, row) {
                $('#movie-data').append('<li data-icon="false">' + row.original_name + '</li>');
            });
            $('#movie-data').listview('refresh');
        }
    }

});//]]>  

</script>

<!--SPEAKER -->
<script type="text/javascript">
	function speaker_json(){
   
    var hr = new XMLHttpRequest();
   
    var url = "http://hitlarrajbhandari.info/speaker.json";
    hr.open("GET", url, true);
    // Set content type header information for sending url encoded variables in the request
    hr.setRequestHeader("Content-type", "application/json", true);
    // Access the onreadystatechange event for the XMLHttpRequest object
    hr.onreadystatechange = function() {
	    if(hr.readyState == 4 && hr.status == 200) {
		    var data = JSON.parse(hr.responseText);
			var ret = document.getElementById("speakerresult");
	   		//results.innerHTML = data.news2.head +" <br/>Full report: " +data.news2.detail;
	    speakerresult.innerHTML = "";
	    for(var obj in data){
	    		speakerresult.innerHTML += "<strong>"+"<ul style='list-style-type:none'><li>"+data[obj].speaker+"</strong>" +"</li>"+"</ul>";
	    }
	    }
    }
    // Send the data to PHP now... and wait for response to update the status div
    hr.send(null); // Actually execute the request
    document.getElementById("speakerresult").innerHTML = "requesting...";
}
	</script>
<style type="text/css">
a{text-decoration: none;}
img.fullscreen{width:100%; height: auto;}

</style>
	</head>
    
	<body onload="onBodyLoad()">
        <!--<div id="container">-->
    
		<div data-role="page" id="start">
			<div data-role="header" data-id="appHeader" data-position="fixed">
				<h1>EC Forum</h1>
                 <a href="#" onclick="refreshPage()" class="update">UPDATE</a>
			</div>
            
			<div data-role="content">
				<div id="resu" >

<script type="text/javascript">home_json();</script>
</div>
			</div>
            
            <div data-role="footer" data-id="appFooter" data-position="fixed">
            	<div data-role="navbar">
                    <ul>
                        <li><a href="#video" class="dead-leaf">Videos</a></li>
                       
                        <li><a href="#speaker" class="dead-leaf">Speakers</a></li>
                    </ul>
                </div>
            </div>
		</div>
        
        
        
        
        
        
        
		<div data-role="page" id="video">
			<div data-role="header" data-id="appHeader" data-position="fixed">
				<h1>Videos</h1>
			</div>
            
			<div data-role="content">
            	
                <ul data-role="listview"  id="movie-data" data-theme="a" > </ul>
               
			</div>
            
            <div data-role="footer" data-id="appFooter" data-position="fixed">
            	<div data-role="navbar">
                    <ul>
                        <li><a href="#start" class="dead-leaf">Home</a></li>
                       
                    </ul>
                </div>
            </div>
		</div>
        
        
        
<div data-role="page" id="speaker">
			<div data-role="header" data-id="appHeader" data-position="fixed">
				<h1>Speakers</h1>
			</div>
			<div data-role="content">
            	<div id="speakerresult" >

<script type="text/javascript">speaker_json();</script>
</div>
			</div>
            
            <div data-role="footer" data-id="appFooter" data-position="fixed">
            	<div data-role="navbar">
                    <ul>
                        <li><a href="#start" class="dead-leaf">Home</a></li>
                       
                    </ul>
                </div>
            </div>
		</div>
        
        

        
        
        
        <!--</div>-->
        
	</body>
</html>
<script type="text/javascript">
$("a.update").click(function(e){

            e.preventDefault();
        var that = this;
        var text = $(this).html();
        $(this).html("<img src='images/ajax-loader.gif' style='width:40px; height:40px;' />");
        setTimeout(function(){
            //fade back 

              window.location.reload();
            $(that).html(text);

           
        }, 3000);
     });

</script>